#!/bin/bash

# Allow i3 to find the scripts to customize it
export PATH=$HOME/etc/bin:$PATH

# Have a ssh session at session level
eval `gnome-keyring-daemon`

# Magic. Without this running, visualization is generally crappy, and italic
# fonts in dialog boxes will be rendered as unknown chars.
gnome-settings-daemon &

# Customized bits for different hosts
case $(hostname) in
    risotto)
        # swap left and right mouse buttons
        # (go back in history with the left thumb)
        xmodmap -e "pointer = 1 2 3 4 5 6 7 9 8"

        # Ubuntu 16.04 decided that the screen control must be broken
        # Used arandr to generate a reasonable configuration.
        xrandr \
            --output DVI-D-0 --mode 2560x1440 --pos 1440x541 --rotate normal \
            --output DVI-D-1 --primary --mode 2560x1440 --pos 0x0 --rotate left
        ;;
esac

# print message from i3 for debugging
# exec sh -c "/usr/bin/i3 -V > /tmp/i3-$(date '+%F-%k-%M-%S').log 2>&1"
exec /usr/bin/i3
